{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\n\nexport async function searchImages(query, page = 1) {\n  return await axios\n    .get('https://pixabay.com/api/', {\n      params: {\n        key: '44240844-fac6cf8e273222cb69c263295',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page,\n        per_page: '15',\n      },\n    })\n    .then(res => {\n      return res.data;\n    });\n}\n","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function listImages(images, gallery) {\n  const markup = images\n    .map(image => {\n      return `\n      <li>\n        <a href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        </a>\n        \n        <ul class=\"info\">\n          <li>Likes: ${image.likes}</li>\n          <li>Views: ${image.views}</li>\n          <li>Comments: ${image.comments}</li>\n          <li>Downloads: ${image.downloads}</li>\n        </ul>\n      </li>\n    `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a', {});\n  }\n}\n\nexport function showError(message) {\n  iziToast.error({ message });\n}\n","import { searchImages } from './js/pixabay-api.js';\nimport { listImages, showError } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst learnMoreBtn = document.querySelector('.btn');\nlet page = 1;\nlet query = '';\nconst per_page = 15;\nlearnMoreBtn.style.display = 'none';\nform.addEventListener('submit', onFormSubmit);\nlearnMoreBtn.addEventListener('click', () => onBtnClick(query));\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  query = input.value.trim();\n\n  if (query === '') {\n    learnMoreBtn.style.display = 'none';\n    showError('Please enter a search query!');\n    return;\n  }\n\n  gallery.innerHTML = '';\n\n  loader.style.display = 'block';\n  searchImages(query)\n    .then(data => {\n      loader.style.display = 'none';\n\n      if (data.hits.length === 0) {\n        learnMoreBtn.style.display = 'none';\n        showError(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n\n        return;\n      }\n\n      listImages(data.hits, gallery);\n    })\n\n    .catch(error => {\n      loader.style.display = 'none';\n      showError('Something went wrong. Please try again later.');\n      console.error(error);\n    });\n  learnMoreBtn.style.display = 'block';\n  form.reset();\n}\n\nasync function onBtnClick(query) {\n  loader.style.display = 'block';\n  page += 1;\n\n  try {\n    loader.style.display = 'none';\n    const response = await searchImages(query, page);\n\n    listImages(response.hits, gallery);\n\n    scrolling();\n\n    if (\n      page * per_page >= response.totalHits ||\n      per_page >= response.totalHits\n    ) {\n      learnMoreBtn.style.display = 'none';\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    console.log(error.message);\n  }\n}\n\nfunction smoothScroll() {\n  const cardHeight = document\n    .querySelector('.gallery li ')\n    .getBoundingClientRect().height;\n\n  window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n}\n\nsmoothScroll();\n"],"names":["searchImages","query","page","axios","res","lightbox","listImages","images","gallery","markup","image","SimpleLightbox","showError","message","iziToast","form","input","loader","learnMoreBtn","per_page","onFormSubmit","onBtnClick","event","data","error","response","smoothScroll","cardHeight"],"mappings":"owBAGO,eAAeA,EAAaC,EAAOC,EAAO,EAAG,CAClD,OAAO,MAAMC,EACV,IAAI,2BAA4B,CAC/B,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAAC,EACA,SAAU,IACX,CACP,CAAK,EACA,KAAKE,GACGA,EAAI,IACZ,CACL,CCZA,IAAIC,EAEG,SAASC,EAAWC,EAAQC,EAAS,CAC1C,MAAMC,EAASF,EACZ,IAAIG,GACI;AAAA;AAAA,mBAEMA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,uBAIrCA,EAAM,KAAK;AAAA,uBACXA,EAAM,KAAK;AAAA,0BACRA,EAAM,QAAQ;AAAA,2BACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAIrC,EACA,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,YAAaC,CAAM,EAE1CJ,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIM,EAAe,aAAc,CAAE,CAAA,CAElD,CAEO,SAASC,EAAUC,EAAS,CACjCC,EAAS,MAAM,CAAE,QAAAD,CAAO,CAAE,CAC5B,CCrCA,MAAME,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,eAAe,EAC9CR,EAAU,SAAS,cAAc,UAAU,EAC3CS,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAe,SAAS,cAAc,MAAM,EAClD,IAAIhB,EAAO,EACPD,EAAQ,GACZ,MAAMkB,EAAW,GACjBD,EAAa,MAAM,QAAU,OAC7BH,EAAK,iBAAiB,SAAUK,CAAY,EAC5CF,EAAa,iBAAiB,QAAS,IAAMG,EAAWpB,CAAK,CAAC,EAE9D,eAAemB,EAAaE,EAAO,CAIjC,GAHAA,EAAM,eAAc,EACpBrB,EAAQe,EAAM,MAAM,OAEhBf,IAAU,GAAI,CAChBiB,EAAa,MAAM,QAAU,OAC7BN,EAAU,8BAA8B,EACxC,MACD,CAEDJ,EAAQ,UAAY,GAEpBS,EAAO,MAAM,QAAU,QACvBjB,EAAaC,CAAK,EACf,KAAKsB,GAAQ,CAGZ,GAFAN,EAAO,MAAM,QAAU,OAEnBM,EAAK,KAAK,SAAW,EAAG,CAC1BL,EAAa,MAAM,QAAU,OAC7BN,EACE,0EACV,EAEQ,MACD,CAEDN,EAAWiB,EAAK,KAAMf,CAAO,CACnC,CAAK,EAEA,MAAMgB,GAAS,CACdP,EAAO,MAAM,QAAU,OACvBL,EAAU,+CAA+C,EACzD,QAAQ,MAAMY,CAAK,CACzB,CAAK,EACHN,EAAa,MAAM,QAAU,QAC7BH,EAAK,MAAK,CACZ,CAEA,eAAeM,EAAWpB,EAAO,CAC/BgB,EAAO,MAAM,QAAU,QACvBf,GAAQ,EAER,GAAI,CACFe,EAAO,MAAM,QAAU,OACvB,MAAMQ,EAAW,MAAMzB,EAAaC,EAAOC,CAAI,EAE/CI,EAAWmB,EAAS,KAAMjB,CAAO,EAEjC,aAGEN,EAAOiB,GAAYM,EAAS,WAC5BN,GAAYM,EAAS,aAErBP,EAAa,MAAM,QAAU,OAEhC,OAAQM,EAAO,CACdP,EAAO,MAAM,QAAU,OACvB,QAAQ,IAAIO,EAAM,OAAO,CAC1B,CACH,CAEA,SAASE,GAAe,CACtB,MAAMC,EAAa,SAChB,cAAc,cAAc,EAC5B,sBAAqB,EAAG,OAE3B,OAAO,SAAS,CAAE,IAAKA,EAAa,EAAG,SAAU,QAAQ,CAAE,CAC7D,CAEAD,EAAc"}